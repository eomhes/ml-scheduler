
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>

static double
sub_timeval(const struct timeval *t1, const struct timeval *t2)
{
    long int long_diff = (t2->tv_sec * 1000000 + t2->tv_usec) - 
        (t1->tv_sec * 1000000 + t1->tv_usec);
    double diff = (double)long_diff/1000000;
    return diff;
}

int main(int argc, char *argv[])
{

	double training_ctoc[192] = {13.55, 13.84, 13.97, 5.22, 5.16, 4.90, 1.87, 1.85, 1.88, 0.41, 0.41, 0.42, 12.48, 14.08, 11.60, 5.23, 5.28, 5.22, 1.76, 1.84, 1.84, 0.40, 0.38, 0.38, 12.35, 12.22, 12.57, 4.78, 4.87, 5.03, 1.74, 1.72, 1.71, 0.39, 0.38, 0.38, 9.77, 7.23, 11.17, 4.25, 3.66, 3.48, 1.54, 1.55, 1.67, 0.35, 0.38, 0.32, 36341.62, 35489.63, 32543.63, 13487.10, 4282.15, 4560.16, 4624.53, 997.90, 1033.66, 1048.50, 16163.97, 14458.60, 17981.93, 6451.41, 6506.58, 6190.74, 2156.56, 2286.40, 2373.73, 514.39, 525.09, 529.70, 2834.71, 3051.71, 3635.97, 1145.18, 1066.26, 1259.24, 458.02, 408.77, 368.07, 98.38, 104.64, 106.13, 1545.49, 1523.17, 1623.67, 511.59, 668.88, 213.58, 237.14, 229.95, 49.12, 53.29, 47.63, 118.48, 116.30, 117.05, 35.00, 40.10, 44.91, 11.81, 12.98, 14.75, 3.30, 3.51, 3.39, 75.28, 73.38, 64.68, 26.78, 28.75, 28.15, 9.22, 9.77, 9.86, 2.24, 2.23, 2.23, 35.98, 40.47, 42.58, 17.04, 16.98, 16.78, 4.64, 4.38, 5.83, 1.32, 1.25, 1.24, 17.36, 12.07, 18.02, 7.00, 6.13, 2.46, 2.42, 2.44, 0.52, 0.55, 0.51, 25.09, 23.18, 23.72, 9.85, 9.62, 9.47, 3.37, 3.36, 3.36, 0.72, 0.75, 0.75, 24.38, 24.86, 25.32, 9.60, 8.88, 8.72, 3.06, 3.35, 3.36, 0.74, 0.74, 0.61, 24.53, 19.59, 9.20, 7.42, 9.19, 2.73, 3.33, 3.30, 0.73, 0.69, 0.69, 13.10, 23.29, 22.37, 7.42, 8.23, 8.60, 3.29, 2.59, 3.15, 0.73, 0.72, 0.70};

	int training_setargs[192] = {7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 400, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 200, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 40, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000, 1000};

	int training_class[192] = {1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};


	struct timeval t1, t2;

	int i, iterations;
	double min_distance_to_instance = 10000000;
	double distance_to_instance;
	double a, b;
	double diff;

	a = 1.0; b = 2.0;
	
	iterations = atoi(argv[1]);

	gettimeofday(&t1, NULL);
	for (i = 0; i < iterations; i++) {
		distance_to_instance = sqrt((double) pow(training_ctoc[iterations % 192] - a, 2)
									+ (double) pow(training_setargs[iterations % 192] - b, 2));
		if (distance_to_instance < min_distance_to_instance) {
			min_distance_to_instance = distance_to_instance;
		}
		//printf("distance: %f\n", distance_to_instance);
	}
	gettimeofday(&t2, NULL);

	diff = sub_timeval(&t1, &t2);
	printf("size of double: %d, taken time: %f\n", sizeof(double), diff);
}

